<head>
  <title>tiles</title>
</head>

<body></body>

<template name="loading">
    yooooooo
</template>

<template name="appLayout">
  {{> rightMenu}}
  {{#if verify currentUser}}
    {{> tileEditModal }}
    {{> deleteTileConfirmation }}
  {{else}}
    {{> login }}
  {{/if}}
  {{> tileViewModal }}
  <div id="pusher-container" class="pusher">
    {{> yield }}
    {{#if verify currentUser}}
      <div class="progress">
        <div class="indeterminate"></div>
      </div>
    {{/if}}
  </div>
</template>

<template name="navbar">
  <nav>
    <div class="nav-wrapper">
      {{#if verify currentUser}}
        <div class='input-field'>
          <i class="mdi-social-person prefix"></i>
          <input type="text" id="user-profile-name" class="text-input user-name" placeholder="Your Name" value="{{profileName}}"/>
        </div>
      {{else}}
        <a class="user-name">{{profileName}}</a>
      {{/if}}
      <a data-sidebar id="right-menu-collapse" href="#"><i class="mdi-navigation-menu"></i></a>
    </div>
  </nav>
</template>

<template name="rightMenu">
  <div id="right-menu" class="ui right vertical inverted labeled icon sidebar menu">
    <ul>
      <li>
        <a href="#" id="brand-top-right"><i class="mdi-action-view-module"> TilesJS</i></a>
      </li>
    {{#if verify currentUser}}
      <li>
        <a class="add-new-tile"><i class="mdi-content-add-box left"> New Tile</i></a>
      </li>
      <li>
        <a data-sort-tiles>
          {{#if tileSortActive}}
            <i class="mdi-action-done left"> Done</i>
          {{else}}
            <i class="mdi-content-sort left"> Sort Tiles</i>
          {{/if}}
        </a>
      </li>
      <li>
        <a data-logout><i class="mdi-action-done-all left"> Sign Out</i></a>
      </li>
    {{else}}
      <li>
        <a data-login><i class="mdi-action-exit-to-app left"> Sign In</i></a>
      </li>
    {{/if}}
    </ul>
  </div>
</template>

<template name="register">
  <div id="register-form-container" class="valign-wrapper">
    <form id="register-form">
      <div class="input-field">
        <i class="mdi-social-person prefix"></i>
        <input id="user-profile-name" type="text"/>
        <label for="user-profile-name">Your Name</label>
      </div>
      <div class="input-field">
        <i class="mdi-communication-email prefix"></i>
        <input id="user-email" type="email"  />
        <label for="user-email">E-mail</label>
      </div>
      <div class="input-field">
        <i class="mdi-action-lock prefix"></i>
        <input id="user-password" type="password"/>
        <label for="user-password">Password</label>
      </div>
      <div class="input-field">
        <i class="mdi-action-lock prefix"></i>
        <input id="user-password-confirm" type="password"/>
        <label for="user-password-confirm">Confirm Password</label>
      </div>
      <div class="input-field">
        <i class="mdi-social-public prefix"></i>
        <input id="user-url" type="text"/>
        <label for="user-url">Public URL</label>
      </div>
      <button id="save-tile-edit" type="submit" class="btn waves-effect waves-light modal-action red"><i class="mdi-content-send right"></i>Sign Up</button>
    </form>
  </div>
</template>

<template name="login">
  <div id="login-modal" class="modal modal-fixed-footer">
      <div class="modal-content">
        <form id="login-form">
          <h4 id="login-title">Login</h4>
          <div class="input-field">
            <i class="mdi-communication-email prefix"></i>
            <input id="user-email" type="email"  />
            <label for="user-email">E-mail</label>
          </div>
          <div class="input-field">
            <i class="mdi-action-lock prefix"></i>
            <input id="user-password" type="password"/>
            <label for="user-password">Password</label>
          </div>
          <button id="save-tile-edit" type="submit" class="btn waves-effect waves-light modal-action red"><i class="mdi-content-send right"></i>Sign In</button>
          <button id="cancel-tile-edit" type="button" class="btn waves-effect waves-grey modal-action modal-close grey">Cancel</button>
        </form>
      </div>
      <!--<div class="modal-footer">
        <div class="progress">
          <div class="indeterminate"></div>
        </div>
      </div>-->
  </div>
</template>

<template name="allTiles">
  {{> navbar }}
  <div id="tile-container" class="flex-column">
    {{#each categories}}
      {{> category}}
    {{/each}}
  </div>
</template>

<template name="category">
  <div class="category-title valign-wrapper" style="color: {{color}};">
    <div class="category-title-text">{{title}}</div>
  </div>
  {{#each tiles}}
    {{> tile color=../color tile=this}}
  {{/each}}
</template>

<template name="tile">
  <div data-id="{{tile._id}}" class="card tile" style="border-color: {{color}}; background-color: {{color}};">
    <div class="tile-content">
      <div class="tile-title">{{tile.title}}</div>
      {{#if hasDates tile}}
        <div class="tile-dates">
          {{formatTileDates tile.dates}}
        </div>
      {{/if}}
      <div class="tile-body">
        {{{textToHTML tile.content}}}
      </div>
    </div>
    <div class="tile-action row">
      {{#if currentUser}}
        <p class="delete-tile">
          <a class="tile-delete" href="#"><i class="mdi-action-delete"></i></a>
        </p>
        <p>
          <a class="tile-edit" href="#"><i class="mdi-editor-border-color right"></i>edit</a>
        </p>
      {{/if}}
      <p>
        <a class="tile-read-more" href="#{{tile._id}}">read more</a>
      </p>
    </div>
  </div>
</template>

<template name="tileViewModal">
  <div id="tile-view-modal" class="modal modal-fixed-footer" style="border-color: {{currentlyViewing.colour}}">
    <div class="modal-content">
      <div class='title'>
        {{currentlyViewing.title}}
      </div>
      {{#if hasDates currentlyViewing}}
        <div class="dates">
          {{formatTileDates currentlyViewing.dates}}
        </div>
      {{/if}}
      <div class='content'>
        {{{textToHTML currentlyViewing.content}}}
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn waves-effect waves-light modal-action modal-close grey"><i class="mdi-action-done left"></i>Done</button>
      <div class="progress">
        <div class="indeterminate"></div>
      </div>
    </div>
  </div>
</template>

<template name="tileEditModal">
  <div id="tile-edit-modal" class="modal modal-fixed-footer">
    <div class="modal-content">
      <div class='title'>
        <div class='input-field'>
          <i class="mdi-content-create prefix"></i>
          <input id='tile-title' type='text' class='tile-title' value="{{currentlyEditing.title}}"/>
          <label for='tile-title' class="{{activeOrNot currentlyEditing.title}}">Title</label>
        </div>
        <div class='input-field'>
          <i class="mdi-action-list prefix"></i>
          <input id='tile-category' type='text' class='tile-category' value="{{currentlyEditing.category}}"/>
          <label for='tile-category' class="{{activeOrNot currentlyEditing.category}}">Category</label>
        </div>
      </div>
      <div class="tile-dates">
        <div class='input-field'>
          <i class="mdi-action-label-outline prefix"></i>
          <input id="date-one" type="date" class="datepicker" />
          <label for='date-one' class="{{activeOrNot currentlyEditing.dates.dateOne}}">Start Date</label>
        </div>
        <div class='input-field'>
          <i class="mdi-action-label prefix"></i>
          <input id="date-two" type="date" class="datepicker" />
          <label for='date-two' class="{{activeOrNot currentlyEditing.dates.dateOne}}">End Date</label>
        </div>
      </div>
      <div class='content'>
        <div class='input-field'>
          <i class="mdi-action-subject prefix"></i>
          <textarea id='tile-content' class='materialize-textarea tile-content'>{{currentlyEditing.content}}</textarea>
          <label for='tile-content' class="{{activeOrNot currentlyEditing.content}}">Content</label>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button id="save-tile-edit" type="submit" class="btn waves-effect waves-light modal-action red"><i class="mdi-action-done left"></i>Done</button>
      <button id="cancel-tile-edit" type="button" class="btn waves-effect waves-grey modal-action modal-close grey">Cancel</button>
      <div class="progress">
        <div class="indeterminate"></div>
      </div>
    </div>
  </div>
</template>


<template name="deleteTileConfirmation">
  <div id="delete-tile-confirmation" class="modal">
   <div class="modal-content">
     <h4>Permanently remove this tile?</h4>
   </div>
   <div class="modal-footer">
     <button data-delete-tile type="button" class="btn waves-effect waves-light modal-action modal-close red"><i class="mdi-action-delete left"></i>Delete</button>
     <button id="cancel-tile-edit" type="button" class="btn waves-effect waves-grey modal-action modal-close grey">Cancel</button>
   </div>
  </div>
</template>
